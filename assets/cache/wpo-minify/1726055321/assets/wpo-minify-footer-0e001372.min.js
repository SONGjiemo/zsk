
/*!
 * ivent v0.2.0 (https://github.com/nk-crew/ivent)
 * Copyright 2023 nK <https://nkdev.info>
 * Licensed under MIT (https://github.com/nk-crew/ivent/blob/master/LICENSE)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ivent={})}(this,(function(e){"use strict";let t=1;function n(e,n){return n&&`${n}::${t++}`||e.uidEvent||t++}const o={};function r(e){const t=n(e);return e.uidEvent=t,o[t]=o[t]||{},o[t]}const c=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),i=/[^.]*(?=\..*)\.|.*/,l=/\..*/,u={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};function a(e){const t=e.replace(l,"");return{event:u[t]||t,originalEvent:t,namespace:e.replace(i,"")||!1,isNative:c.has(t)}}function s(e,t,n){const o="string"==typeof t,r=o?n:t||n,c=a(e);let i=c.event;return c.isNative||(i=e),[o,r,i,c]}const f=/::\d+$/;function d(e,t,n,o){"string"==typeof t&&e&&t.split(" ").forEach((t=>{const[c,i,l,u]=s(t,n,o),a=r(e),d=a[l]||{},p=t.startsWith(".");if(void 0===i){if(p)for(const n of Object.keys(a))y(e,a,n,t.slice(1));for(const[n,o]of Object.entries(d)){const r=n.replace(f,"");u.namespace&&!t.includes(r)||m(e,a,l,o.callable,o.delegationSelector)}}else{if(!Object.keys(d).length)return;m(e,a,l,i,c?n:null)}}))}function p(e,t={}){for(const[n,o]of Object.entries(t))try{e[n]=o}catch{Object.defineProperty(e,n,{configurable:!0,get:()=>o})}return e}function g(e,t,n=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function v(e,t,o,c,i){let[l,u,a,f]=s(t,o,c);if(f.event!==f.originalEvent){const e=e=>function(t){return(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))&&e.call(this,t)};u=e(u)}const v=r(e),m=v[a]||(v[a]={}),y=g(m,u,l?o:null);if(y)return void(y.oneOff=y.oneOff&&i);const b=n(u,f.namespace),h=l?function(e,t,n){return function o(r){const c=e.querySelectorAll(t);for(let{target:i}=r;i&&i!==this;i=i.parentNode)for(const l of c)if(l===i)return p(r,{delegateTarget:i}),o.oneOff&&d(e,r.type,t,n),n.apply(i,[r]);return!1}}(e,o,u):function(e,t){return function n(o){return p(o,{delegateTarget:e}),n.oneOff&&d(e,o.type,t),t.apply(e,[o])}}(e,u);h.delegationSelector=l?o:null,h.callable=u,h.oneOff=i,h.uidEvent=b,m[b]=h,e!==document||"ready"!==a||l||(a="DOMContentLoaded","loading"===document.readyState)?e.addEventListener(a,h,l):h(new CustomEvent("ready"))}function m(e,t,n,o,r){const c=g(t[n],o,r);c&&(e.removeEventListener(n,c,Boolean(r)),delete t[n][c.uidEvent])}function y(e,t,n,o){const r=t[n]||{};for(const[c,i]of Object.entries(r))c.includes(o)&&m(e,t,n,i.callable,i.delegationSelector)}e.off=d,e.on=function(e,t,n,o){"string"==typeof t&&e&&t.split(" ").forEach((t=>{v(e,t,n,o,!1)}))},e.one=function(e,t,n,o){"string"==typeof t&&e&&t.split(" ").forEach((t=>{v(e,t,n,o,!0)}))},e.trigger=function(e,t,n){if("string"!=typeof t||!e)return null;const o=window.jQuery?window.jQuery:null;let r=null,c=!0,i=!0,l=!1;a(t).namespace&&o&&(r=o.Event(t,n),o(e).trigger(r),c=!r.isPropagationStopped(),i=!r.isImmediatePropagationStopped(),l=r.isDefaultPrevented());const u=p(new Event(t,{bubbles:c,cancelable:!0}),n);return l&&u.preventDefault(),i&&e.dispatchEvent(u),u.defaultPrevented&&r&&r.preventDefault(),u}}));



!function(){const{on:e,trigger:t}=window.ivent;new class{constructor(){const t=this;t.cache={},t.pendingAjax=!1,t.xhrAjaxSearch=!1,t.$preloader=document.createElement("div"),t.$preloader.className="docspress-preloader",t.$preloader.innerHTML="<span><span></span></span>",t.$singleAjax=document.querySelector(".docspress-single-ajax"),t.initEarlier(),e(document,"ready",(()=>{t.init()}))}stripHash(e){return e.replace(/#.*/,"")}initEarlier(){this.initSidebarScroll()}init(){this.initSearch(),this.initDocSearch(),this.initAnchors(),this.initFeedbacks(),this.initAjax()}initSearch(){const t=this;let s=!1;e(document,"submit",".docspress-search-form",(e=>{e.preventDefault(),t.prepareSearchResults(e.delegateTarget)})),e(document,"input",".docspress-search-form",(e=>{e.preventDefault(),clearTimeout(s),s=setTimeout((()=>{t.prepareSearchResults(e.delegateTarget)}),500)}))}prepareSearchResults(e){var t;const s=this;if(s.xhrAjaxSearch&&s.xhrAjaxSearch.abort(),null===(t=e.querySelector(".docspress-search-field"))||void 0===t||!t.value)return e.nextElementSibling.querySelector(".docspress-search-form-result").innerHTML="",void e.classList.remove("docspress-search-form-existence");let n=e.getAttribute("action");n+=(-1<n.indexOf("?")?"&":"?")+new URLSearchParams(new FormData(e)).toString(),s.xhrAjaxSearch=new XMLHttpRequest,s.xhrAjaxSearch.open("GET",n),s.xhrAjaxSearch.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.xhrAjaxSearch.onload=function(){if(200===s.xhrAjaxSearch.status){const t=(new DOMParser).parseFromString(s.xhrAjaxSearch.responseText,"text/html").querySelector(".docspress-search-list").outerHTML,n=e.parentElement.querySelector(":scope > .docspress-search-form-result");n&&(n.innerHTML=t),e.classList.add("docspress-search-form-existence")}else console.log("Error:",s.xhrAjaxSearch.status)},s.xhrAjaxSearch.onerror=function(){console.log("Request failed"),s.xhrAjaxSearch=!1},s.xhrAjaxSearch.send()}initDocSearch(){void 0!==window.docsearch&&document.querySelectorAll(".docspress-docsearch").forEach((e=>{const t=e.getAttribute("data-docsearch-app-id"),s=e.getAttribute("data-docsearch-api-key"),n=e.getAttribute("data-docsearch-index-name");t&&s&&n&&window.docsearch({appId:t,apiKey:s,indexName:n,container:e,debug:!1})}))}initAnchors(){const e=!!window.AnchorJS&&new window.AnchorJS;e&&(e.options={placement:"right",visible:"hover",icon:"#"},e.add(".docspress-single-content .entry-content h2, .docspress-single-content .entry-content h3, .docspress-single-content .entry-content h4"))}initFeedbacks(){const t=this;e(document,"click",".docspress-single-feedback a",(e=>{t.onFeedbackClick(e)})),e(document,"submit",".docspress-single-feedback + .docspress-single-feedback-suggestion",(e=>{t.onFeedbackSuggestionSend(e)}))}initSidebarScroll(){const e=document.querySelector(".docspress-single-sidebar-wrap");if(!e||e.scrollHeight<=e.clientHeight)return;const t=e.querySelector(".current_page_item");if(!t)return;const s=t.querySelector(":scope > a"),n=s.getBoundingClientRect().top,o=e.getBoundingClientRect().top,r=e.scrollTop,i=e.clientHeight,a=n+r-o,c=s.clientHeight,d=a-i+c;(e.scrollTop>a||e.scrollTop<d)&&(e.scrollTop=a-i/2+c/2)}initAjax(){var t;const s=this;if(!s.$singleAjax)return;s.setCache(window.location.href,{href:window.location.href,editHref:null===(t=document.querySelector("#wp-admin-bar-edit .ab-item"))||void 0===t?void 0:t.getAttribute("href"),title:document.title,doc:s.$singleAjax.innerHTML,html:document.documentElement.outerHTML}),e(s.$singleAjax,"click",".docspress-nav-list a, .docspress-single-breadcrumbs a, .docspress-single-articles a, .docspress-single-adjacent-nav a, .docspress-search-form-result a",(e=>{s.onDocLinksClick(e)}));let n=document.location.pathname,o="";e(window,"popstate",(e=>{o=document.location.pathname,o!==n&&s.renderDoc(e.delegateTarget.location.href),n=o}))}onFeedbackClick(e){e.preventDefault();const t=this,s=e.delegateTarget;if(t.pendingAjax)return;t.pendingAjax=!0;const n=s.closest(".docspress-single-feedback"),o=s.closest(".docspress-single-content").querySelector(".docspress-single-feedback-suggestion");n.classList.add("docspress-single-feedback-loading");const r=s.getAttribute("data-type"),i={post_id:s.getAttribute("data-id"),type:r,action:"docspress_ajax_feedback",_wpnonce:window.docspress_vars.nonce};n.appendChild(t.$preloader.cloneNode(!0)),fetch(window.docspress_vars.ajaxurl,{method:"POST",body:new URLSearchParams(i)}).then((e=>e.json())).then((e=>{n.innerHTML="<div>".concat(e.data,"</div>"),e.success&&o&&(o.style.display="block",o.innerHTML+='<input type="hidden" name="feedback_type" value="'.concat(r,'">')),n.classList.remove("docspress-single-feedback-loading"),t.pendingAjax=!1}))}onFeedbackSuggestionSend(e){e.preventDefault();const t=this,s=e.delegateTarget;if(t.pendingAjax)return;t.pendingAjax=!0;const n=s.closest(".docspress-single-feedback-suggestion"),o=s.querySelector("button");n.classList.add("docspress-single-feedback-suggestion-loading");const r=Array.from(new FormData(s)).reduce(((e,t)=>{let[s,n]=t;return e[s]=n,e}),{}),i={post_id:r.id,from:r.from,suggestion:r.suggestion,feedback_type:r.feedback_type,action:"docspress_ajax_feedback_suggestion",_wpnonce:window.docspress_vars.nonce};n.appendChild(t.$preloader.cloneNode(!0)),o.disabled=!0,fetch(window.docspress_vars.ajaxurl,{method:"POST",body:new URLSearchParams(i)}).then((e=>e.json())).then((e=>{n.innerHTML="<div>".concat(e.data,"</div>"),n.classList.remove("docspress-single-feedback-suggestion-loading"),t.pendingAjax=!1}))}setCache(e,t){t=t||!1,(e=e||!1)&&t&&!this.cache[e]&&(this.cache[e]=t)}getCache(e){return!(!(e=e||!1)||!this.cache[e])&&this.cache[e]}renderDoc(e){const s=this.getCache(e);var n;this.$singleAjax.innerHTML=s.doc,document.title=s.title,s.editHref&&(null===(n=document.querySelector("#wp-admin-bar-edit .ab-item"))||void 0===n||n.setAttribute("href",s.editHref));const o=document.querySelector(".docspress-single"),{top:r}=o.getBoundingClientRect();0>r&&o&&o.scrollIntoView(),this.initAnchors(),t(document,"docspress_ajax_loaded",{data:s})}onDocLinksClick(e){const t=e.delegateTarget;1<e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||window.location.protocol===t.protocol&&window.location.hostname===t.hostname&&(-1<t.href.indexOf("#")&&this.stripHash(t.href)===this.stripHash(window.location.href)||"file:"!==window.location.protocol&&(e.defaultPrevented||(e.preventDefault(),this.loadDocPage(t.href))))}loadDocPage(e){const t=this;if(!(e=e||!1)||t.stripHash(e)===t.stripHash(window.location.href))return;const s=t.getCache(e);if(s)return t.renderDoc(e),void window.history.pushState(null,s.title,e);t.xhr&&t.xhr.abort&&(t.xhr.abort(),t.xhr={});const n=new XMLHttpRequest;t.$singleAjax.classList.add("docspress-single-ajax-loading"),t.$singleAjax.querySelector(".docspress-single-content").appendChild(t.$preloader.cloneNode(!0)),n.open("GET",e),n.onload=function(){if(200===n.status){var s,o;const r=n.responseText;if(!r)return void(window.location=e);let i=document.createElement("div");i.innerHTML=r;const a=i.querySelector("title").textContent||document.title,c=null===(s=i.querySelector("#wp-admin-bar-edit .ab-item"))||void 0===s?void 0:s.getAttribute("href"),d=null===(o=i.querySelector(".docspress-single-ajax"))||void 0===o?void 0:o.innerHTML;if(!d)return void(window.location=e);t.setCache(e,{href:e,editHref:c,title:a,doc:d,html:r}),t.renderDoc(e),window.history.pushState(null,a,e),i.remove(),i=null,t.$singleAjax.classList.remove("docspress-single-ajax-loading")}else 0!==n.status?console.log("error",n):window.location=e,t.$singleAjax.classList.remove("docspress-single-ajax-loading")},n.send()}}}();



                (function (ivent) {
                    ivent.on(document, "docspress_ajax_loaded", function (event) {
                        // Fallback.
                        const new_page = event?.data;

                        /*
 * New page content loaded via ajax you can get in variable 'new_page'
 * Example: console.log(new_page);
 */
                    });
                }(ivent));
            

$(function(){$('.btn-ceo-sign').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_user_sign_in',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
UIkit.modal('#ceo-sign').show()
UIkit.util.on('#ceo-sign','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-sign').remove()});btnLoading.stop()
btnLoading.remove()
$('#submit-ceo-sign').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_user_sign_in',nonce:$('#ceo-sign-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){UIkit.notification(res.data,{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{UIkit.notification(res.data,{status:'warning'})}})})}})})
$('.btn-ceo-exchange').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_integral',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
UIkit.modal('#ceo-exchange').show()
UIkit.util.on('#ceo-exchange','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-exchange').remove()});btnLoading.stop()
btnLoading.remove()
$('#submit-ceo-exchange').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_pay_integral',num:$('#ceo-exchange-num').val(),nonce:$('#ceo-exchange-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){UIkit.notification('兑换成功，最新余额：'+res.data,{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{UIkit.notification(res.data,{status:'warning'})}})})}})})
$('#btn-ceo-extract').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_user_withdraw',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
UIkit.modal('#ceo-extract').show()
UIkit.util.on('#ceo-extract','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-extract').remove()});btnLoading.stop()
btnLoading.remove()
$('.withdraw-type').click(function(){$('.withdraw-type').removeClass('select')
$(this).addClass('select')
$('#ceo-withdraw-type').val($(this).data('type'))
if($('#ceo-withdraw-type').val()==1){$('#withdraw-info').show()
$('#withdraw-real-money').show()
$('#withdraw-site-money').hide()}
if($('#ceo-withdraw-type').val()==2){$('#withdraw-info').hide()
$('#withdraw-real-money').hide()
$('#withdraw-site-money').show()}})
$('#ceo-withdraw-money').on('input',function(){let money=$(this).val()
if(!money){money=0}
let fee=$(this).data('fee')
let proportion=$(this).data('proportion')
let actualMoney=Decimal.sub(parseFloat(money),Decimal.mul(parseFloat(money),Decimal.div(parseFloat(fee),100))).toFixed(2,Decimal.ROUND_DOWN)
let realMoney=Decimal.div(parseFloat(actualMoney),parseFloat(proportion)).toFixed(2,Decimal.ROUND_DOWN)
$('#withdraw-real-money').html('现金到账<em>'+realMoney+'元</em>')
let currency=$('#ceo-withdraw-currency').val()
$('#withdraw-site-money').html(currency+'到账<em>'+parseFloat(actualMoney)+currency+'</em>')})
$('#submit-ceo-extract').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_user_withdraw',withdraw:$('#ceo-withdraw-type').val(),alipay_account:$('#ceo-withdraw-alipay-account').val(),alipay_real_name:$('#ceo-withdraw-real-name').val(),contact_mobile:$('#ceo-withdraw-contact-mobile').val(),money:$('#ceo-withdraw-money').val(),nonce:$('#ceo-withdraw-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){UIkit.notification(res.data,{status:'success'})
window.location.reload()}else{UIkit.notification(res.data,{status:'warning'})}})})}})})
$('.btn-ceo-recharge').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
let checkInterval=null
let _UIKit=UIkit
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
_UIKit.modal('#ceo-recharge').show()
_UIKit.util.on('#ceo-recharge','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-recharge').remove()});btnLoading.stop()
btnLoading.remove()
$('.recharge-pay-money').click(function(){$('.recharge-pay-money').removeClass('select')
$(this).addClass('select')
$('#ceo-recharge-num').val($(this).data('money'))})
$('#ceo-recharge-num').focus(function(){$('.recharge-pay-money').removeClass('select')})
$('.recharge-pay-payment').click(function(){$('.recharge-pay-payment').removeClass('select')
$(this).addClass('select')
$('#ceo-recharge-payment').val($(this).data('payment'))})
$('#submit-ceo-recharge').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_pay',payment:$('#ceo-recharge-payment').val(),money:Decimal.div(parseFloat($('#ceo-recharge-num').val()),parseFloat($('#ceo-recharge-proportion').val())).toFixed(2,Decimal.ROUND_DOWN),nonce:$('#ceo-recharge-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){if(res.success){if(res.data.pay_url){if(/Mobi|Android|iPhone/i.test(navigator.userAgent)){window.location.href=res.data.pay_url}else{window.open(res.data.pay_url)}}
if(res.data.jssdk){if(typeof WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener('WeixinJSBridgeReady',onBridgeReady,!1)}else if(document.attachEvent){document.attachEvent('WeixinJSBridgeReady',onBridgeReady);document.attachEvent('onWeixinJSBridgeReady',onBridgeReady)}}else{WeixinJSBridge.invoke('getBrandWCPayRequest',res.data.jssdk,function(res){if(res.err_msg=="get_brand_wcpay_request:ok"){}})}}
if(res.data.qr_code){$('#ceoshop-member-box').html(res.data.html)
_UIKit.modal('#ceo-payment-wrap').show()
_UIKit.util.on('#ceo-payment-wrap','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-payment-wrap').remove()})}
setTimeout(function(){check(res.data.order_sn)},1000)}else{btnLoading.stop()
btnLoading.remove()
UIkit.notification(res.data,{status:'warning'})}})})
$('#btn-ceo-cards').click(function(){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_code',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
_UIKit.modal('#ceo-cards').show()
_UIKit.util.on('#ceo-cards','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-cards').remove()});$('#submit-ceo-card').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_pay_code',code:$('#ceo-card-code').val(),nonce:$('#ceo-card-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{UIkit.notification(res.data,{status:'warning'})}})})}})})}})
function check(orderSn){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_check&order_sn='+orderSn,method:'GET',success:function(res){if(res.success){UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{console.log('订单支付仍在进行中...')
setTimeout(function(){check(orderSn)},1000)}},error:function(){console.log('检测订单支付状态时发生错误！')
setTimeout(function(){check(orderSn)},1000)}})}})
$('.btn-ceo-svip').click(function(){let loadingStyle=$(this).data('style')
if(loadingStyle){var btnLoading=Ladda.create(this);btnLoading.start()}
let checkInterval=null
let _UIKit=UIkit
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_vip&vip_id='+$(this).data('vip-id'),method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
_UIKit.modal('#ceo-svip').show()
_UIKit.util.on('#ceo-svip','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-svip').remove()});if(loadingStyle){btnLoading.stop()
btnLoading.remove()}
$('.svip-select').click(function(){$('.svip-select').removeClass('select')
$(this).addClass('select')
$('#svip-current-desc').html($(this).data('desc'))
$('#ceo-svip-id').val($(this).data('id'))
$('#ceo-svip-price').val($(this).data('price'))
$('#svip-use-coupon-code').val('')
$('#ceo-svip-discount').val('0.00')
$('#svip-show-discount').text('优惠￥0')
$('#svip-show-discount').hide()
calcRealPay()})
$('.svip-pay-payment').click(function(){$('.svip-pay-payment').removeClass('select')
$(this).addClass('select')
$('#ceo-svip-payment').val($(this).data('payment'))
calcRealPay()})
$('#svip-use-coupon').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
let code=$('#svip-use-coupon-code').val()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_vip_coupon&code='+code+'&vip_id='+$('#ceo-svip-id').val(),method:'GET',success:function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){$('#ceo-svip-discount').val(res.data.money)
$('#svip-show-discount').text('优惠￥'+res.data.money)
$('#svip-show-discount').show()
calcRealPay()
UIkit.notification('代金券使用成功',{status:'success'})}else{$('#ceo-svip-discount').val('0.00')
$('#svip-show-discount').text('优惠￥0')
$('#svip-show-discount').hide()
calcRealPay()
UIkit.notification(res.data,{status:'warning'})}},error:function(){console.log('检测订单支付状态时发生错误！')}})})
$('#submit-ceo-svip').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_pay_vip',payment:$('#ceo-svip-payment').val(),vip_id:$('#ceo-svip-id').val(),coupon_code:$('#svip-use-coupon-code').val(),nonce:$('#ceo-svip-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){if(res.success){if(res.data.pay_status==0){if(res.data.pay_url){if(/Mobi|Android|iPhone/i.test(navigator.userAgent)){window.location.href=res.data.pay_url}else{window.open(res.data.pay_url)}}
if(res.data.jssdk){if(typeof WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener('WeixinJSBridgeReady',onBridgeReady,!1)}else if(document.attachEvent){document.attachEvent('WeixinJSBridgeReady',onBridgeReady);document.attachEvent('onWeixinJSBridgeReady',onBridgeReady)}}else{WeixinJSBridge.invoke('getBrandWCPayRequest',res.data.jssdk,function(res){if(res.err_msg=="get_brand_wcpay_request:ok"){}})}}
if(res.data.qr_code){$('#ceoshop-member-box').html(res.data.html)
_UIKit.modal('#ceo-payment-wrap').show()
_UIKit.util.on('#ceo-payment-wrap','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-payment-wrap').remove()})}
setTimeout(function(){check(res.data.order_sn)},1000)}else{btnLoading.stop()
btnLoading.remove()
UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}}else{btnLoading.stop()
btnLoading.remove()
UIkit.notification(res.data,{status:'warning'})}})})}})
function calcRealPay(){let tempTotalPrice=Decimal.sub(parseFloat($('#ceo-svip-price').val()),parseFloat($('#ceo-svip-discount').val())).toFixed(2,Decimal.ROUND_DOWN)
if($('#ceo-svip-payment').val()!='balance'){tempTotalPrice=Decimal.div(parseFloat(tempTotalPrice),parseFloat($('#ceo-svip-proportion').val())).toFixed(2,Decimal.ROUND_DOWN)}
if(tempTotalPrice<0){tempTotalPrice='0.00'}
if($('#ceo-svip-payment').val()!='balance'){$('#ceo_price').html('￥<span id="ceo-svip-total">'+tempTotalPrice+'</span>')}else{$('#ceo_price').html('&nbsp;<span id="ceo-svip-total">'+tempTotalPrice+'</span> '+$('#ceo-currency-name').val())}}
function check(orderSn){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_vip_check&order_sn='+orderSn,method:'GET',success:function(res){if(res.success){UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{console.log('订单支付仍在进行中...')
setTimeout(function(){check(orderSn)},1000)}},error:function(){console.log('检测订单支付状态时发生错误！')
setTimeout(function(){check(orderSn)},1000)}})}})
$('.btn-ceo-lottery').click(function(){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_activity_lottery_info',method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
UIkit.modal('#ceo-ceoshop-lottery').show()
UIkit.util.on('#ceo-ceoshop-lottery','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-ceoshop-lottery').remove()});let luckyConfig={width:'390px',height:'390px',blocks:[{padding:'10px',background:'#869cfa'}],prizes:[],buttons:[{radius:'35%',imgs:[{src:'/wp-content/themes/ceomax-pro/ceoshop/assets/img/lottery/btn.png',width:'90%',top:'-120%'}]}],start:function(){const data={action:'ceo_shop_activity_lottery_start',nonce:$('#ceo-lottery-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){if(res.success){myLucky.play()
myLucky.stop(res.data.index)}else{UIkit.notification(res.data,{status:'warning'})}})},end:function(prize){UIkit.notification(prize.msg,{status:'success'})}}
for(let i=0;i<lottery_item.length;i++){luckyConfig.prizes.push({fonts:[{text:lottery_item[i].text,top:'20%'}],msg:lottery_item[i].msg,imgs:[{src:lottery_item[i].img,width:'25%',top:'45%'}],background:i%2==0?'#e9e8fe':'#b8c5f2'})}
const myLucky=new LuckyCanvas.LuckyWheel('#my-lucky',luckyConfig)}})})})
function copyText(){var copyText=document.getElementById("promotion-link");copyText.select();document.execCommand("copy");UIkit.notification({message:'复制成功',status:'success'})};



                (function (ivent) {
                    ivent.on(document, "docspress_ajax_loaded", function (event) {
                        // Fallback.
                        const new_page = event?.data;

                        /*
 * New page content loaded via ajax you can get in variable 'new_page'
 * Example: console.log(new_page);
 */
                    });
                }(ivent));
            

$(function(){function purchaseProductClick(){$('.btn-ceo-purchase-product').off('click').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
let checkInterval=null
let _UIKit=UIkit
let product_id=$(this).data('product-id')
let flush=$(this).data('flush')
if($(this).data('type')=='open'){$.post(zongcai.ajaxurl,{action:'ceo_shop_pay_product_download',product_id:product_id,sku:$(this).data('sku')},function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){_UIKit.notification(res.data,{status:'success'})
window.setTimeout(function(){window.location.reload()},1500)}else{_UIKit.notification(res.data,{status:'warning'})}})
return}
let url=zongcai.ajaxurl+'?action=ceo_shop_pay_product&product_id='+product_id
if($(this).data('sku')){url+='&sku='+$(this).data('sku')}
if($(this).data('type')=='download'){url+='&download=1'}
$.ajax({url:url,method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
btnLoading.stop()
btnLoading.remove()
_UIKit.modal('#ceo-purchase-pay').show()
_UIKit.util.on('#ceo-purchase-pay','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-purchase-pay').remove()});$('#submit-ceo-product3').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_product_download&product_id='+product_id+'&sku='+$('#ceo-product-sku').val(),method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
_UIKit.modal('#ceo-download').show()
_UIKit.util.on('#ceo-download','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-download').remove()});btnLoading.stop()
btnLoading.remove()}})})
$('#ceo-purchase-pay .increase').click(function(){$('#ceo-product-inventory').val(parseInt($('#ceo-product-inventory').val())+1)
$('#ceo-product-price').val(Decimal.mul(parseFloat($('#ceo-product-sku-price').val()),parseInt($('#ceo-product-inventory').val())).toFixed(2,Decimal.ROUND_DOWN))
calcRealPay()
calcVipDiscount()})
$('#ceo-purchase-pay .decrease').click(function(){let num=parseInt($('#ceo-product-inventory').val())
if(num-1<1){$('#ceo-product-inventory').val(1)}else{$('#ceo-product-inventory').val(num-1)}
$('#ceo-product-price').val(Decimal.mul(parseFloat($('#ceo-product-sku-price').val()),parseInt($('#ceo-product-inventory').val())).toFixed(2,Decimal.ROUND_DOWN))
calcRealPay()
calcVipDiscount()})
$('.product-sku-select').click(function(){$('.product-sku-select').removeClass('select')
$(this).addClass('select')
$('#product-current-price').text($(this).data('ori-price'))
$('#product-current-inventory').text($(this).data('inventory'))
$('#product-current-freight').text($(this).data('freight'))
$('#ceo-product-freight').val($(this).data('freight'))
$('#ceo-product-sku').val($(this).data('sku'))
$('#ceo-product-sku-discount').val($(this).data('discount'))
$('#ceo-product-sku-price').val($(this).data('price'))
$('#ceo-product-sku-ori-price').val($(this).data('ori-price'))
if($(this).data('download')==-1){$('#ceo-product-sku-price').val($(this).data('ori-price'))}
calcVipDiscount()
$('#ceo-product-price').val(Decimal.mul(parseFloat($('#ceo-product-sku-price').val()),parseInt($('#ceo-product-inventory').val())).toFixed(2,Decimal.ROUND_DOWN))
calcRealPay()
if($(this).data('download')=='1'||$(this).data('download')=='2'){$('#submit-ceo-product').hide()
$('#submit-ceo-product2').hide()
$('#submit-ceo-product3').show()}else{if($(this).data('exclusive')=='1'&&$('#ceo-user-vip').val()==-1){$('#submit-ceo-product').hide()
$('#submit-ceo-product2').show()
$('#submit-ceo-product3').hide()}else{$('#submit-ceo-product').show()
$('#submit-ceo-product2').hide()
$('#submit-ceo-product3').hide()}}
if($(this).data('download')=='-1'){$('.submit-ceo-product-tip').show()}else{$('.submit-ceo-product-tip').hide()}})
$('.product-pay-payment').click(function(){$('.product-pay-payment').removeClass('select')
$(this).addClass('select')
$('#ceo-product-payment').val($(this).data('payment'))
calcRealPay()})
$('#product-use-coupon').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
let code=$('#product-use-coupon-code').val()
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_discount_coupon&code='+code+'&product_id='+product_id,method:'GET',success:function(res){btnLoading.stop()
btnLoading.remove()
if(res.success){$('#ceo-product-discount').val(parseFloat(res.data.money))
$('#ceo-product-discount-condition').val(parseFloat(res.data.condition_money))
$('#product-show-discount-code').html('<span>'+res.data.title+'</span><em>- '+res.data.money+'</em>')
calcRealPay(!0)}else{$('#ceo-product-discount').val('0.00')
$('#ceo-product-discount-condition').val('0.00')
$('#product-show-discount-code').html('')
$('#product-use-coupon-code').val('')
calcRealPay()
_UIKit.notification(res.data,{status:'warning'})}},error:function(){console.log('检测订单支付状态时发生错误！')}})})
$('#submit-ceo-product').click(function(){let btnLoading=Ladda.create(this);btnLoading.start()
const data={action:'ceo_shop_pay_product',payment:$('#ceo-product-payment').val(),product_id:product_id,sku:$('#ceo-product-sku').val(),inventory:$('#ceo-product-inventory').val(),coupon_code:$('#product-use-coupon-code').val(),buyer_mail:$('#ceo-product-mail').val(),buyer_addr:$('#ceo-product-buyer-addr').val(),buyer_remark:$('#ceo-product-buyer-remark').val(),nonce:$('#ceo-product-nonce').val(),}
$.post(zongcai.ajaxurl,data,function(res){if(res.success){if(res.data.pay_status==0){if(res.data.pay_url){if(/Mobi|Android|iPhone/i.test(navigator.userAgent)){window.location.href=res.data.pay_url}else{window.open(res.data.pay_url)}}
if(res.data.jssdk){if(typeof WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener('WeixinJSBridgeReady',onBridgeReady,!1)}else if(document.attachEvent){document.attachEvent('WeixinJSBridgeReady',onBridgeReady);document.attachEvent('onWeixinJSBridgeReady',onBridgeReady)}}else{WeixinJSBridge.invoke('getBrandWCPayRequest',res.data.jssdk,function(res){if(res.err_msg=="get_brand_wcpay_request:ok"){}})}}
if(res.data.qr_code){$('#ceoshop-member-box').html(res.data.html)
_UIKit.modal('#ceo-payment-wrap').show()
_UIKit.util.on('#ceo-payment-wrap','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-payment-wrap').remove()})}
setTimeout(function(){check(res.data.order_sn,data.sku)},1000)}else{btnLoading.stop()
btnLoading.remove()
UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){if(flush==1){openDownloadPage(product_id,data.sku)}else{window.location.reload()}},1500)}}else{btnLoading.stop()
btnLoading.remove()
UIkit.notification(res.data,{status:'warning'})}})})}})
function calcVipDiscount(){$('#product-ori-total').text(Decimal.mul($('#product-current-price').text(),$('#ceo-product-inventory').val()).toFixed(2,Decimal.ROUND_DOWN)+" "+$('#ceo-currency-name').val())
$("#ceo-product-all-vip-discount li").each(function(){let tempVipDiscount=parseFloat($(this).data('discount-arr').split(',')[$('#ceo-product-sku').val()-1]);let tempVipDiscountPrice=Decimal.mul($('#product-current-price').text(),$('#ceo-product-inventory').val()).mul(tempVipDiscount).div(10).toFixed(2,Decimal.ROUND_DOWN);if(tempVipDiscount==0){$(this).children('p').html('免费')}else{$(this).children('p').html('<em>'+tempVipDiscountPrice+" "+$('#ceo-currency-name').val()+'</em>'+tempVipDiscount+'折')}})
if($('#ceo-user-vip').val()!=-1&&$('#ceo-product-sku-discount').val()!=10){let tempDiscountPrice=Decimal.mul(parseInt($('#ceo-product-inventory').val()),Decimal.sub(parseFloat($('#ceo-product-sku-ori-price').val()),parseFloat($('#ceo-product-sku-price').val()))).toFixed(2,Decimal.ROUND_DOWN)
if($('#ceo-product-sku-discount').val()==0){$('#product-show-discount-vip').html('<span>'+$('#ceo-user-vip-name').val()+'免费</span><em>- '+tempDiscountPrice+" "+$('#ceo-currency-name').val()+'</em>')}else{$('#product-show-discount-vip').html('<span>'+$('#ceo-user-vip-name').val()+'优惠'+$('#ceo-product-sku-discount').val()+'折</span><em>- '+tempDiscountPrice+" "+$('#ceo-currency-name').val()+'</em>')}}}
function calcRealPay(tip=!1){let tempTotalPrice=parseFloat($('#ceo-product-price').val())
if(parseFloat($('#ceo-product-discount').val())>0){let sumPrice=Decimal.add(parseFloat($('#ceo-product-price').val()),parseFloat($('#ceo-product-freight').val())).toFixed(2,Decimal.ROUND_DOWN);if(parseFloat(sumPrice)<parseFloat($('#ceo-product-discount-condition').val())){_UIKit.notification('此代金券最低使用门槛'+$('#ceo-product-discount-condition').val(),{status:'warning'})
$('#ceo-product-discount').val('0.00')
$('#ceo-product-discount-condition').val('0.00')
$('#product-show-discount-code').html('')
$('#product-use-coupon-code').val('')}else{if(tip){_UIKit.notification('代金券使用成功',{status:'success'})}
tempTotalPrice=Decimal.sub(parseFloat($('#ceo-product-price').val()),parseFloat($('#ceo-product-discount').val())).toFixed(2,Decimal.ROUND_DOWN)}}
if($('#ceo-product-payment').val()!='balance'){tempTotalPrice=Decimal.div(parseFloat(tempTotalPrice),parseFloat($('#ceo-product-proportion').val())).toFixed(2,Decimal.ROUND_DOWN)}
tempTotalPrice=Decimal.add(parseFloat(tempTotalPrice),parseFloat($('#ceo-product-freight').val())).toFixed(2,Decimal.ROUND_DOWN)
if(tempTotalPrice<0){tempTotalPrice='0.00'}
if($('#ceo-product-payment').val()!='balance'){$('#ceo_price').html('￥<span id="ceo-product-total">'+tempTotalPrice+'</span>')}else{$('#ceo_price').html('&nbsp;<span id="ceo-product-total">'+tempTotalPrice+'</span> '+$('#ceo-currency-name').val())}}
function check(orderSn,sku){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_product_check&order_sn='+orderSn,method:'GET',success:function(res){if(res.success){UIkit.notification('订单支付成功！',{status:'success'})
window.setTimeout(function(){if(flush==1){openDownloadPage(product_id,sku)}else{window.location.reload()}},1500)}else{console.log('订单支付仍在进行中...')
setTimeout(function(){check(orderSn,sku)},1000)}},error:function(){console.log('检测订单支付状态时发生错误！')
setTimeout(function(){check(orderSn,sku)},1000)}})}})}
window.purchaseProductClick=purchaseProductClick;purchaseProductClick();function openDownloadPage(product_id,sku_id){$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_product_download&product_id='+product_id+'&sku='+sku_id,method:'GET',success:function(res){$('#ceoshop-member-box').html(res)
UIkit.modal('#ceo-download').show()
UIkit.util.on('#ceo-download','hidden',function(){$('#ceoshop-member-box').html()
$('#ceo-download').remove()})}})}
$('.btn-ceo-purchase-change-video').off('click').click(function(){let product_id=$(this).data('product-id')
let sku=$(this).data('sku')
let _this=$(this)
$.ajax({url:zongcai.ajaxurl+'?action=ceo_shop_pay_change_video&product_id='+product_id+'&sku='+sku,method:'GET',success:function(res){$('#ceo-video-s').html(res)
purchaseProductClick()
$('.ceo-video-list-xinxi-down .btn-ceo-purchase-product').data('sku',sku)
$(".ceo-video-list-liebiao-box li div").removeClass('ceo-video-list-liebiao-s')
$(".ceo-video-list-liebiao-box li div a").removeClass('ceo-video-list-liebiao-d')
$(".ceo-video-list-liebiao-box li div i").removeClass().addClass('ceofont icon-play')
if(_this.hasClass('video_link_play')){_this.prev().addClass('ceo-video-list-liebiao-d')
_this.prev().children().removeClass().addClass('icon-video')
_this.addClass('ceo-video-list-liebiao-d')}else{_this.addClass('ceo-video-list-liebiao-d')
_this.children().removeClass().addClass('icon-video')
_this.next().addClass('ceo-video-list-liebiao-d')}
if(jQuery('.ckplayer-video').length){jQuery('.ckplayer-video').each(function(){jQuery(this).height(jQuery(this).width()*0.5678)})}
if(jQuery(".ckplayer-video-real").length){jQuery(".ckplayer-video-real").bind('contextmenu',function(){return!1});jQuery(".ckplayer-video-real").each(function(){var conv=jQuery(this).data("video")
conn=jQuery(this).data("nonce");console.log(conn,conv)
new ckplayer({container:"#ckplayer-video-"+conn,variable:"player"+conn,autoplay:!1,video:conv})})}
if(jQuery(".dplayer-video-real").length){jQuery(".dplayer-video-real").bind('contextmenu',function(){return!1});jQuery(".dplayer-video-real").each(function(){var conv=jQuery(this).data("video")
conn=jQuery(this).data("nonce");if(jQuery(this).hasClass("video-blob")){jQuery(".article-video").append("<div class='article-video-loading' style='z-index: 9;position: absolute;top: calc(50% - 12px);left: 0;right: 0;color: #fff;font-size: 16px;text-align: center;'>视频加载中...</div>");window.URL=window.URL||window.webkitURL;var xhr=new XMLHttpRequest();xhr.open("GET",conv,!0);xhr.responseType="blob";xhr.timeout=1000*60*1;xhr.onload=function(e){if(this.status==200){var blob=this.response;jQuery(".article-video-loading").remove();new DPlayer({container:document.getElementById("dplayer-video-"+conn),screenshot:!0,autoplay:!1,video:{url:window.URL.createObjectURL(blob),pic:'',thumbnails:'',type:'auto'}})}}
xhr.send()}else{new DPlayer({container:document.getElementById("dplayer-video-"+conn),screenshot:!0,autoplay:!1,video:{url:conv,pic:'',thumbnails:'',type:'auto'}})}})}}})})});



                (function (ivent) {
                    ivent.on(document, "docspress_ajax_loaded", function (event) {
                        // Fallback.
                        const new_page = event?.data;

                        /*
 * New page content loaded via ajax you can get in variable 'new_page'
 * Example: console.log(new_page);
 */
                    });
                }(ivent));
            
